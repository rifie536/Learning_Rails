# カリキュラム教材作成ガイドライン

このドキュメントは、Learning Rails カリキュラムの教材を作成する際の標準構造とベストプラクティスを定義します。

## 学習スタイルの種類

Learning Rails では、内容に応じて **2つの学習スタイル** を使い分けます。

### スタイル1: TODO テンプレート形式（標準）
**適用例**: Day 2, Day 4

- `exercises/` に TODO コメント付きテンプレートを配置
- 学習者が TODO 部分を実装
- `solutions/` に完成版を配置

**メリット**:
- 学習者が自分で考えて実装できる
- Claude のレビュー機能を最大限活用できる
- プログラミングスキルが最も身につく

**適用シーン**:
- Ruby のコーディング演習（ほとんどの場合）
- 新しい概念を学ぶ（ブロック、クラス、メタプログラミング等）
- 実装力を鍛えたい場合

### スタイル2: ハイブリッド形式
**適用例**: Day 5

- Git/Bundler 等のツール演習: ガイド形式（`.md` ファイル）
- Ruby コード演習: TODO テンプレート形式
- 内容に応じて柔軟に組み合わせ

**メリット**:
- 各内容に最適な学習方法を選択できる
- ツール系とコーディング系を分離できる

**適用シーン**:
- ツール操作とコーディングが混在する場合
- Git、Bundler、Docker 等のツール演習
- 複数の異なるスキルを学ぶ場合

**注意**: 特別な理由がない限り、Ruby コーディング演習には **スタイル1（TODO テンプレート形式）** を使用してください。

## ディレクトリ構造

各日（day_XXX）のディレクトリは以下の構造に従ってください：

```
day_XXX/
├── README.md              # その日の学習内容の概要
├── exercises.md           # 演習課題の詳細説明
├── examples/              # サンプルコード（学習用）
│   ├── 01_topic.rb
│   ├── 02_topic.rb
│   └── ...
├── exercises/             # 演習課題（学習者が実装する）
│   ├── README.md          # レビュー依頼方法の説明
│   ├── exercise1.rb       # TODO コメント付きテンプレート
│   ├── exercise2.rb
│   └── ...
└── solutions/             # 解答例（学習者が詰まったら参照）
    ├── exercise1.rb       # 完成したコード + テストケース
    ├── exercise2.rb
    └── ...
```

## 各ディレクトリの役割

### 1. README.md
- **目的**: その日の学習内容の全体像を提供
- **内容**:
  - 学習目標
  - なぜこれが重要か（Railsでの使用例）
  - 今日学ぶこと（概要）
  - 学習の流れ
  - ファイル構成
  - 所要時間
  - 参考リンク

### 2. exercises.md
- **目的**: 演習課題の詳細な要件を説明
- **内容**:
  - 各演習の要件
  - 使用例（期待される動作）
  - 実装先: `exercises/exerciseN.rb`（重要！）
  - チェックリスト
  - 実行方法

### 3. examples/
- **目的**: トピックごとのサンプルコードを提供
- **ファイル命名**: `01_topic.rb`, `02_topic.rb` など
- **内容**:
  - 豊富なコメント付きの実行可能なコード
  - 出力例のコメント
  - ベストプラクティスの説明

### 4. exercises/
- **目的**: 学習者が演習を実装する場所
- **ファイル命名**: `exercise1.rb`, `exercise2.rb` など
- **内容**:
  - ファイルヘッダー（演習タイトル、要件）
  - TODO コメント（実装すべき場所）
  - テストコード（動作確認用）
  - 適切なヒント
- **README.md**: レビュー依頼方法を含む

### 5. solutions/
- **目的**: 模範解答を提供
- **ファイル命名**: `exercise1.rb`, `exercise2.rb` など（exercises/ と対応）
- **内容**:
  - 完成したコード
  - コメント（なぜこのように実装したか）
  - テストケース
  - 複数の実装例（必要に応じて）

## 演習ファイルのテンプレート

### exercises/exerciseN.rb のテンプレート

```ruby
#!/usr/bin/env ruby
# frozen_string_literal: true

# 演習N: [タイトル]
#
# [課題の説明]
#
# 要件:
# - [要件1]
# - [要件2]
# - ...
#
# 使用例:
# [期待される動作のコード例]
#
# 出力:
# [期待される出力]

# TODO: ここに[メソッド名/クラス名]を実装してください
# ヒント: [必要に応じてヒントを記載]


# テストコード
puts "=== 演習N: [タイトル] ==="
# [テストコードを記載]
```

### exercises/README.md のテンプレート

```markdown
# Day X 演習課題

このディレクトリには、Day X の演習課題のテンプレートファイルが含まれています。

## 演習の進め方

1. **課題を読む**: `../exercises.md` で各演習の要件を確認
2. **実装する**: 各 `exercise*.rb` ファイルの TODO 部分にコードを実装
3. **テストする**: 各ファイルを実行して動作を確認
4. **レビューを依頼**: 実装が完了したら Claude にレビューを依頼

## 演習ファイル

- `exercise1.rb` - [演習1のタイトル]
- `exercise2.rb` - [演習2のタイトル]
- ...

## 実行方法

```bash
# 個別に実行
ruby exercise1.rb
ruby exercise2.rb

# すべて実行
ruby exercise1.rb && ruby exercise2.rb && ...
```

## レビューの依頼方法

演習を完了したら、以下のように Claude に依頼してください：

### パターン1: 個別の演習をレビュー
```
exercise1.rb をレビューしてください
```

### パターン2: すべての演習をレビュー
```
day_XXX/exercises の演習をすべてレビューしてください
```

### パターン3: 特定の観点でレビュー
```
exercise1.rb をレビューしてください。
特に以下の点を確認してください：
- [観点1]
- [観点2]
```

## Claude のレビュー項目

Claude は以下の観点でコードをレビューします：

1. **正確性**: 要件を満たしているか
2. **Ruby らしさ**: Ruby の慣習に従っているか
3. **可読性**: コードが読みやすいか
4. **効率性**: 適切なメソッドを使用しているか
5. **エッジケース**: 境界条件を考慮しているか
6. **改善提案**: より良い実装方法の提案

## 詰まったら

- `../solutions/` ディレクトリに解答例があります
- ただし、まずは自分で考えることが重要です
- どうしてもわからない場合は、Claude に質問してください

## 学習のヒント

- まずは動くコードを書く（完璧を目指さない）
- テストコードを実行して動作確認
- 解答例と比較して学ぶ
- Claude のレビューを受けて改善する
- 何度も書き直すことで身につく

頑張ってください！
```

## exercises.md の書き方

各演習の説明では、実装先を明確に指定してください：

```markdown
## 演習1: [タイトル]

[説明]

**要件:**
- [要件1]
- [要件2]

**使用例:**
\```ruby
[コード例]
\```

`exercises/exercise1.rb`に実装してください。
```

**重要**: `solutions/exercise1.rb` ではなく `exercises/exercise1.rb` と記載すること！

## README.md の学習の流れ

```markdown
## 学習の流れ

1. サンプルコード（`examples/`）を読んで実行する
2. 解説を読んで理解を深める
3. 演習課題（`exercises/`）に取り組む
4. Claude にレビューを依頼する
5. 解答例（`solutions/`）と比較する
```

## 各スタイルの実装方法

### スタイル1: TODO テンプレート形式の作成手順

**ステップ1: solutions/ に完成版を作成**
```bash
# 完成版のコードを作成
vim curriculum/phase_01/day_XXX/solutions/exercise1.rb
```

**ステップ2: exercises/ に TODO テンプレート版を手動作成**

```ruby
#!/usr/bin/env ruby
# frozen_string_literal: true

# 演習1: [タイトル]
#
# [説明]
#
# 要件:
# - [要件1]
# - [要件2]
# - ...
#
# 使用例:
# [期待される動作のコード例]

# TODO: ここに実装してください
# ヒント: [必要に応じて適切なヒントを追加]


# テストコード
puts "=== 演習1: [タイトル] ==="
# テストコードを記載
```

**ステップ3: exercises/README.md を作成**
- Day 2 または Day 4 の `exercises/README.md` をテンプレートとして使用
- 演習ファイル一覧を更新

**ステップ4: 実行権限を付与**
```bash
chmod +x curriculum/phase_01/day_XXX/exercises/*.rb
chmod +x curriculum/phase_01/day_XXX/solutions/*.rb
```

**重要**: スクリプトは基本構造の生成のみ可能です。**高品質な TODO テンプレートは手動作成が必須**です。

### スタイル2: ハイブリッド形式の作成手順

**ステップ1: 内容を分類する**
- コーディング演習 → TODO テンプレート形式
- ツール演習（Git, Bundler 等） → ガイド形式（`.md` ファイル）

**ステップ2: コーディング演習を作成**
- スタイル1 の手順に従って TODO テンプレートを作成

**ステップ3: ツール演習のガイドを作成**
```bash
# Git 演習のガイド
vim curriculum/phase_01/day_XXX/exercises/git_practice_guide.md

# Bundler 演習のガイド
vim curriculum/phase_01/day_XXX/exercises/bundler_practice_guide.md
```

ガイドには以下を含める：
- 実行するコマンドの手順
- 期待される出力
- よくある問題と解決方法
- レビューの依頼方法

**ステップ4: exercises/README.md を作成**
- Day 5 の `exercises/README.md` をテンプレートとして使用
- 各タイプの演習の進め方を明記
- ツール演習とコーディング演習を分けて説明

**参考**: Day 5 の実装を確認してください。

## スクリプトと推奨ワークフロー

### スクリプト（generate_exercises.rb）でできること

**自動生成される項目**:
- ✅ `exercises/` ディレクトリの作成
- ✅ solutions/ から exercises/ への TODO テンプレート変換
  - コメント部分（要件、説明）を保持
  - テストコードを保持
  - TODO コメント + ヒントプレースホルダーを挿入
- ✅ `exercises/README.md` の自動生成（基本版）
- ✅ `exercises.md` の参照先更新（`solutions/` → `exercises/`）
- ✅ `README.md` の学習の流れ更新

### スクリプトでできないこと（手動調整が必要）

- ❌ コンテキストを理解したヒントの生成（プレースホルダーのみ挿入）
- ❌ 難易度に応じたヒントの調整
- ❌ ハイブリッド形式のガイドファイル作成（Git, Bundler 等）

### 推奨ワークフロー

**ステップ1**: solutions/ と examples/ を手動で作成
**ステップ2**: スクリプトで基本構造を自動生成
**ステップ3**: ヒントを手動で調整
**ステップ4**: 動作確認

```bash
# 1. solutions/ を作成
vim curriculum/phase_01/day_XXX/solutions/exercise1.rb

# 2. スクリプト実行
ruby scripts/generate_exercises.rb curriculum/phase_01/day_XXX

# 3. ヒントを調整
vim curriculum/phase_01/day_XXX/exercises/exercise1.rb
# プレースホルダーを具体的なヒントに書き換え

# 4. 動作確認
ruby curriculum/phase_01/day_XXX/solutions/exercise1.rb  # ✅
ruby curriculum/phase_01/day_XXX/exercises/exercise1.rb  # ❌ TODO
```

**結論**: スクリプトで基本構造を生成し、**ヒントのみ手動調整**することで効率的に作成できます。

## 教材作成のチェックリスト

新しい教材を作成する際は、以下を確認してください：

- [ ] README.md に学習目標と全体像が記載されている
- [ ] exercises.md に全演習の要件が明確に記載されている
- [ ] exercises.md の実装先が `exercises/exerciseN.rb` になっている
- [ ] examples/ にサンプルコードが用意されている
- [ ] exercises/ ディレクトリが存在し、README.md が含まれている
- [ ] exercises/ に TODO コメント付きテンプレートファイルがある（または適切なガイドファイル）
- [ ] solutions/ に完成した解答例がある
- [ ] 各ファイルに実行権限（chmod +x）が付与されている
- [ ] README.md のファイル構成図が正確である
- [ ] 適切なヒントコメントが含まれている
- [ ] テストコードが動作確認できる

## よくある質問

### Q: スクリプトを使わずに手動で作成すべきですか？
**A**: はい。高品質な教材を作成するには、手動作成を推奨します。スクリプトは基本構造の生成のみに使用してください。

### Q: ツール演習（Git, Docker等）はどうすれば良いですか？
**A**: ハイブリッド形式を使用してください。Day 5 を参考に、ガイド形式（`.md`ファイル）で手順を記載します。

### Q: 演習の難易度はどう調整すべきですか？
**A**:
- 初級: 要件を明確に、ヒントを多めに
- 中級: 要件は明確に、ヒントは最小限
- 上級: 要件のみ、ヒントなし

### Q: テストコードはどの程度書くべきですか？
**A**: 学習者が実装した内容を確認できる最小限のテストコードを含めてください。TDD を強制する必要はありません。
